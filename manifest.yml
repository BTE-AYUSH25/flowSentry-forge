app:
  id: ari:cloud:ecosystem::app/f0631c69-d671-47ec-bebe-f607baf1a3a4
  runtime:
    name: nodejs20.x
    # ‚ùå mistake before: nodejs22.x (causes bundling instability)

permissions:
  scopes:
    - read:jira-work
    - read:jira-user
    - write:jira-work
    - manage:jira-project
    - storage:app

modules:
  # ---------------- ISSUE GLANCE ----------------
  jira:issueGlance:
    - key: flowsentry-glance
      title: FlowSentry Risk
      resource: main
      resolver:
        function: backend
      label: "ü§ñ Analyzing..."
      icon: https://developer.atlassian.com/platform/forge/images/issue-panel-icon.svg

  # ---------------- ISSUE PANEL ----------------
  jira:issuePanel:
    - key: flowsentry-panel
      title: FlowSentry AI Insights
      icon: https://developer.atlassian.com/platform/forge/images/issue-panel-icon.svg
      resource: main
      resolver:
        function: backend

  # ---------------- SINGLE BACKEND FUNCTION ----------------
  function:
    - key: backend
      handler: index.handler
      # ‚ùå mistake before:
      # - multiple functions declared
      # - Forge resolver apps require ONE function only

resources:
  - key: main
    path: static/frontend
